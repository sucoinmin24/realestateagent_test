<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ê³µì¸ì¤‘ê°œì‚¬">
    <meta name="theme-color" content="#667eea">
    <title>ê³µì¸ì¤‘ê°œì‚¬ ì‹œí—˜ ë¬¸ì œì§‘</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            -webkit-user-select: none;
            user-select: none;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .progress-bar {
            background: rgba(255,255,255,0.3);
            height: 8px;
            border-radius: 4px;
            margin-top: 15px;
            overflow: hidden;
        }

        .progress-fill {
            background: white;
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        .content {
            padding: 40px;
        }

        .start-screen {
            text-align: center;
            padding: 40px 20px;
        }

        .start-screen h2 {
            font-size: 24px;
            color: #333;
            margin-bottom: 20px;
        }

        .start-screen p {
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .select-group {
            margin: 25px 0;
            text-align: left;
        }

        .select-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
            font-size: 16px;
        }

        .select-group select,
        .select-group input {
            width: 100%;
            padding: 14px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            transition: border-color 0.3s;
        }

        .select-group select:focus,
        .select-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .select-group input {
            cursor: text;
        }

        #questionCountInput {
            display: none;
            margin-top: 15px;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 16px 45px;
            font-size: 18px;
            border-radius: 30px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 20px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .question-screen {
            display: none;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eee;
        }

        .question-number {
            font-size: 18px;
            font-weight: bold;
            color: #667eea;
        }

        .question-stats {
            display: flex;
            gap: 20px;
            font-size: 14px;
            color: #666;
        }

        /* ë¬¸ì œ ì´ë¯¸ì§€ ì˜ì—­ */
        .question-image-container {
            margin-bottom: 30px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border: 2px solid #e0e0e0;
        }

        .question-image {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 8px;
        }

        .question-image.loading {
            min-height: 400px;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ìˆ«ì ë²„íŠ¼ ì˜ì—­ */
        .number-buttons {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .number-btn {
            padding: 20px;
            font-size: 24px;
            font-weight: bold;
            border: 3px solid #e0e0e0;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
            -webkit-tap-highlight-color: transparent;
        }

        .number-btn:hover:not(.disabled) {
            border-color: #667eea;
            background: #f8f9ff;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }

        .number-btn.selected {
            border-color: #667eea;
            background: #f0f4ff;
            color: #667eea;
        }

        .number-btn.correct {
            border-color: #4caf50;
            background: #e8f5e9;
            color: #4caf50;
        }

        .number-btn.wrong {
            border-color: #f44336;
            background: #ffebee;
            color: #f44336;
        }

        .number-btn.disabled {
            pointer-events: none;
            opacity: 0.8;
        }

        .explanation-box {
            margin-top: 25px;
            padding: 20px;
            background: #f0f8ff;
            border-radius: 10px;
            border-left: 4px solid #4caf50;
            display: none;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .explanation-box.show {
            display: block;
        }

        .explanation-title {
            font-weight: bold;
            color: #4caf50;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .explanation-text {
            color: #333;
            line-height: 1.6;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #eee;
            gap: 10px;
        }

        .nav-left, .nav-right {
            display: flex;
            gap: 10px;
        }

        .btn-nav {
            padding: 14px 26px;
            font-size: 16px;
        }

        .btn-secondary {
            background: #95a5a6;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
            box-shadow: 0 5px 15px rgba(149, 165, 166, 0.4);
        }

        .btn-home {
            background: #3498db;
        }

        .btn-home:hover {
            background: #2980b9;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        .btn-finish {
            background: #e74c3c;
        }

        .btn-finish:hover {
            background: #c0392b;
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
        }

        .result-screen {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .score-display {
            font-size: 72px;
            font-weight: bold;
            color: #667eea;
            margin: 30px 0;
        }

        .score-label {
            font-size: 24px;
            color: #333;
            margin-bottom: 10px;
        }

        .score-details {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 40px 0;
        }

        .score-item {
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .score-item-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }

        .score-item-value {
            font-size: 28px;
            font-weight: bold;
            color: #333;
        }

        .wrong-answers {
            margin-top: 40px;
            text-align: left;
        }

        .wrong-answers h3 {
            font-size: 20px;
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }

        .wrong-answer-item {
            background: #fff3cd;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #ffc107;
        }

        .wrong-answer-header {
            font-weight: bold;
            color: #856404;
            margin-bottom: 10px;
        }

        .wrong-answer-explanation {
            color: #333;
            line-height: 1.6;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #ffeaa7;
        }

        .explanation-label {
            font-weight: bold;
            color: #4caf50;
            margin-bottom: 5px;
        }

        .image-error {
            text-align: center;
            padding: 40px;
            color: #f44336;
            background: #ffebee;
            border-radius: 10px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            body {
                padding: 0;
            }

            .container {
                border-radius: 0;
                min-height: 100vh;
            }

            .content {
                padding: 20px;
            }

            .score-details {
                grid-template-columns: 1fr;
            }

            .score-display {
                font-size: 48px;
            }

            .navigation {
                flex-direction: column;
            }

            .nav-left, .nav-right {
                width: 100%;
            }

            .btn-nav {
                flex: 1;
            }

            .number-buttons {
                grid-template-columns: repeat(5, 1fr);
                gap: 10px;
            }

            .number-btn {
                padding: 15px 10px;
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ  ê³µì¸ì¤‘ê°œì‚¬ ì‹œí—˜ ë¬¸ì œì§‘</h1>
            <p id="headerSubtitle">2020-2025ë…„ ê¸°ì¶œë¬¸ì œ</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <div class="content">
            <!-- ì‹œì‘ í™”ë©´ -->
            <div class="start-screen" id="startScreen">
                <h2>ê³µì¸ì¤‘ê°œì‚¬ ì‹œí—˜ ëŒ€ë¹„ ë¬¸ì œì§‘</h2>
                <p>
                    ê¸°ì¶œë¬¸ì œë¥¼ ë°”íƒ•ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ ë¬¸ì œì§‘ì…ë‹ˆë‹¤.
                    2023, 2024, 2025ë…„
                    ë¶€ë™ì‚°í•™ê°œë¡ , ë¯¼ë²• ë° ë¯¼ì‚¬íŠ¹ë³„ë²• ë°˜ì˜ ì™„ë£Œ.<br>
                    ì´ì •ë¯¼ í™”ì´íŒ…!
                </p>

                <div class="select-group">
                    <label for="yearSelect">ğŸ“… ë…„ë„ ì„ íƒ:</label>
                    <select id="yearSelect">
                        <option value="all">ì „ì²´ ë…„ë„</option>
                        <option value="2025">2025ë…„ (ì œ36íšŒ)</option>
                        <option value="2024">2024ë…„ (ì œ35íšŒ)</option>
                        <option value="2023">2023ë…„ (ì œ34íšŒ)</option>
                        <option value="2022">2022ë…„ (ì œ33íšŒ)</option>
                        <option value="2021">2021ë…„ (ì œ32íšŒ)</option>
                        <option value="2020">2020ë…„ (ì œ31íšŒ)</option>
                        <option value="random">ğŸ² ëœë¤ (ë§ì¶¤í˜•)</option>
                    </select>
                </div>

                <div class="select-group" id="questionCountInput">
                    <label for="questionCount">ë¬¸í•­ ìˆ˜ ì…ë ¥:</label>
                    <input type="number" id="questionCount" min="5" max="200" value="40" placeholder="ì˜ˆ: 40">
                </div>

                <div class="select-group">
                    <label for="subjectSelect">ğŸ“š ê³¼ëª© ì„ íƒ:</label>
                    <select id="subjectSelect">
                        <option value="all">ì „ì²´ ê³¼ëª© (í†µí•©)</option>
                        <option value="intro">ë¶€ë™ì‚°í•™ê°œë¡ </option>
                        <option value="civil">ë¯¼ë²• ë° ë¯¼ì‚¬íŠ¹ë³„ë²•</option>
                        <option value="broker">ê³µì¸ì¤‘ê°œì‚¬ë²•</option>
                        <option value="public">ë¶€ë™ì‚°ê³µë²•</option>
                        <option value="disclosure">ë¶€ë™ì‚°ê³µì‹œë²• ë° ì„¸ë²•</option>
                    </select>
                </div>

                <button class="btn" onclick="startQuiz()">ì‹œí—˜ ì‹œì‘ ğŸš€</button>
            </div>

            <!-- ë¬¸ì œ í™”ë©´ -->
            <div class="question-screen" id="questionScreen">
                <div class="question-header">
                    <div class="question-number" id="questionNumber">ë¬¸ì œ 1/40</div>
                    <div class="question-stats">
                        <span>â±ï¸ <span id="timer">00:00</span></span>
                        <span id="yearBadge" style="background: #667eea; color: white; padding: 4px 10px; border-radius: 12px; font-size: 13px;"></span>
                    </div>
                </div>

                <!-- ë¬¸ì œ ì´ë¯¸ì§€ -->
                <div class="question-image-container">
                    <img id="questionImage" class="question-image" alt="ë¬¸ì œ" />
                </div>

                <!-- ìˆ«ì ë²„íŠ¼ (1-5) -->
                <div class="number-buttons" id="numberButtons">
                    <button class="number-btn" onclick="selectAnswer(0)">1</button>
                    <button class="number-btn" onclick="selectAnswer(1)">2</button>
                    <button class="number-btn" onclick="selectAnswer(2)">3</button>
                    <button class="number-btn" onclick="selectAnswer(3)">4</button>
                    <button class="number-btn" onclick="selectAnswer(4)">5</button>
                </div>

                <!-- í•´ì„¤ -->
                <div class="explanation-box" id="explanationBox">
                    <div class="explanation-title">ğŸ’¡ í•´ì„¤</div>
                    <div class="explanation-text" id="explanationText"></div>
                </div>

                <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
                <div class="navigation">
                    <div class="nav-left">
                        <button class="btn btn-secondary btn-nav" onclick="previousQuestion()" id="prevBtn">â—€ ì´ì „</button>
                        <button class="btn btn-nav" onclick="nextQuestion()" id="nextBtn">ë‹¤ìŒ â–¶</button>
                    </div>
                    <div class="nav-right">
                        <button class="btn btn-home btn-nav" onclick="goHome()">ğŸ  í™ˆ</button>
                        <button class="btn btn-finish btn-nav" onclick="finishEarly()">â¹ï¸ ì¢…ë£Œ</button>
                    </div>
                </div>
            </div>

            <!-- ê²°ê³¼ í™”ë©´ -->
            <div class="result-screen" id="resultScreen">
                <h2 class="score-label">ìµœì¢… ì ìˆ˜</h2>
                <div class="score-display" id="finalScore">0ì </div>

                <div class="score-details">
                    <div class="score-item">
                        <div class="score-item-label">ì´ ë¬¸ì œ ìˆ˜</div>
                        <div class="score-item-value" id="totalQuestions">0</div>
                    </div>
                    <div class="score-item">
                        <div class="score-item-label">ì •ë‹µ</div>
                        <div class="score-item-value" style="color: #4caf50;" id="correctAnswers">0</div>
                    </div>
                    <div class="score-item">
                        <div class="score-item-label">ì˜¤ë‹µ</div>
                        <div class="score-item-value" style="color: #f44336;" id="wrongAnswers">0</div>
                    </div>
                </div>

                <div class="wrong-answers" id="wrongAnswersSection">
                    <h3>ğŸ“ í‹€ë¦° ë¬¸ì œ í•´ì„¤</h3>
                    <div id="wrongAnswersList"></div>
                </div>

                <button class="btn" onclick="restartQuiz()">ë‹¤ì‹œ ì‹œì‘ ğŸ”„</button>
            </div>
        </div>
    </div>

    <script>
        // ë…„ë„ ì„ íƒ ì‹œ ë¬¸í•­ìˆ˜ ì…ë ¥ í•„ë“œ í‘œì‹œ/ìˆ¨ê¹€
        document.getElementById('yearSelect').addEventListener('change', function() {
            const questionCountInput = document.getElementById('questionCountInput');
            if (this.value === 'random') {
                questionCountInput.style.display = 'block';
            } else {
                questionCountInput.style.display = 'none';
            }
        });

        // ë¬¸ì œ ë°ì´í„°ë² ì´ìŠ¤ (ì´ë¯¸ì§€ ê¸°ë°˜)
        // íŒŒì¼ëª… ê·œì¹™: questions/YYYY_C_T_NN.png
        // YYYY: ë…„ë„ (2025)
        // C: ì°¨ìˆ˜ (1=1ì°¨, 2=2ì°¨)
        // T: êµì‹œ (1=1êµì‹œ, 2=2êµì‹œ)
        // NN: ë¬¸ì œë²ˆí˜¸ (01-40)
        const questionDatabase = [
            // 2025ë…„ 1ì°¨ 1êµì‹œ - ë¶€ë™ì‚°í•™ê°œë¡  (1-40ë²ˆ)
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_01.png', correct: 0, explanation: 'ë¶€ë™ì„±(fixity)ì€ í† ì§€ê°€ ë¬¼ë¦¬ì ìœ¼ë¡œ ê³ ì •ë˜ì–´ ìˆì–´ ì´ë™í•  ìˆ˜ ì—†ë‹¤ëŠ” íŠ¹ì„±ì„ ë§í•©ë‹ˆë‹¤.' },
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_02.png', correct: 0, explanation: 'í•œêµ­í‘œì¤€ì‚°ì—…ë¶„ë¥˜(KSIC)ì—ì„œ ë¶€ë™ì‚° ì„ëŒ€ ë° ê³µê¸‰ì—…ì€ ë¶€ë™ì‚°ê´€ë ¨ ì„œë¹„ìŠ¤ì—…ì— í•´ë‹¹í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.' },
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_03.png', correct: 2, explanation: 'ë‹¤ì¤‘ì£¼íƒì€ ê±´ì¶•ë²•ìƒ ë‹¨ë…ì£¼íƒì˜ í•œ ì¢…ë¥˜ì…ë‹ˆë‹¤.' },
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_04.png', correct: 2, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_05.png', correct: 3, explanation: 'STPëŠ” Segmentation, Targeting, Positioningì…ë‹ˆë‹¤.'},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_06.png', correct: 2, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_07.png', correct: 4, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_08.png', correct: 0, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_09.png', correct: 2, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_10.png', correct: 4, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_11.png', correct: 0, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_12.png', correct: 4, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_13.png', correct: 1, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_14.png', correct: 0, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_15.png', correct: 3, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_16.png', correct: 1, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_17.png', correct: 4, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_18.png', correct: 2, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_19.png', correct: 1, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_20.png', correct: 1, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_21.png', correct: 3, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_22.png', correct: 1, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_23.png', correct: 3, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_24.png', correct: 4, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_25.png', correct: 4, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_26.png', correct: 0, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_27.png', correct: 2, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_28.png', correct: 3, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_29.png', correct: 1, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_30.png', correct: 2, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_31.png', correct: 1, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_32.png', correct: 2, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_33.png', correct: 4, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_34.png', correct: 0, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_35.png', correct: 1, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_36.png', correct: 4, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_37.png', correct: 3, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_38.png', correct: 3, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_39.png', correct: 2, explanation: ''},
            { year: 2025, subject: 'intro', image: 'questions/2025_1_1_40.png', correct: 0, explanation: ''},
            
            // 2025ë…„ 1ì°¨ 1êµì‹œ - ë¯¼ë²• (41-80ë²ˆ)
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_41.png', correct: 1, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_42.png', correct: 2, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_43.png', correct: 0, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_44.png', correct: 4, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_45.png', correct: 3, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_46.png', correct: 0, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_47.png', correct: 1, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_48.png', correct: 2, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_49.png', correct: 3, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_50.png', correct: 2, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_51.png', correct: 3, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_52.png', correct: 1, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_53.png', correct: 0, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_54.png', correct: 4, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_55.png', correct: 3, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_56.png', correct: 3, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_57.png', correct: 2, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_58.png', correct: 0, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_59.png', correct: 1, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_60.png', correct: 4, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_61.png', correct: 3, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_62.png', correct: 3, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_63.png', correct: 1, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_64.png', correct: 4, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_65.png', correct: 0, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_66.png', correct: 2, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_67.png', correct: 4, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_68.png', correct: 3, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_69.png', correct: 0, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_70.png', correct: 3, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_71.png', correct: 4, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_72.png', correct: 2, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_73.png', correct: 1, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_74.png', correct: 1, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_75.png', correct: 4, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_76.png', correct: 1, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_77.png', correct: 2, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_78.png', correct: 4, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_79.png', correct: 0, explanation: ''},
            { year: 2025, subject: 'civil', image: 'questions/2025_1_1_80.png', correct: 2, explanation: ''},
            
            // 2025ë…„ 2ì°¨ 1êµì‹œ - ê³µì¸ì¤‘ê°œì‚¬ë²• (1-40ë²ˆ)
            { year: 2025, subject: 'broker', image: 'questions/2025_2_1_01.png', correct: 4, explanation: 'ê³µì¸ì¤‘ê°œì‚¬ë²• ì„¤ëª…' },
            { year: 2025, subject: 'broker', image: 'questions/2025_2_1_02.png', correct: 1, explanation: 'ê³µì¸ì¤‘ê°œì‚¬ ìê²©ì¦ ê´€ë ¨' },
            
            // 2025ë…„ 2ì°¨ 1êµì‹œ - ë¶€ë™ì‚°ê³µë²• (41-80ë²ˆ)
            { year: 2025, subject: 'public', image: 'questions/2025_2_1_41.png', correct: 2, explanation: 'êµ­í† ê³„íšë²• ê´€ë ¨' },
            
            // 2025ë…„ 2ì°¨ 2êµì‹œ - ë¶€ë™ì‚°ê³µì‹œë²• ë° ì„¸ë²• (1-40ë²ˆ)
            { year: 2025, subject: 'disclosure', image: 'questions/2025_2_2_01.png', correct: 0, explanation: 'ê³µê°„ì •ë³´ë²• ì„¤ëª…' },

            // 2024ë…„ 1ì°¨ 1êµì‹œ - ë¶€ë™ì‚°í•™ê°œë¡  (1-40ë²ˆ)
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_01.png', correct: 3, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_02.png', correct: 1, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_03.png', correct: 3, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_04.png', correct: 0, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_05.png', correct: 4, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_06.png', correct: 4, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_07.png', correct: 1, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_08.png', correct: 3, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_09.png', correct: 0, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_10.png', correct: 2, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_11.png', correct: 1, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_12.png', correct: 0, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_13.png', correct: 4, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_14.png', correct: 3, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_15.png', correct: 1, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_16.png', correct: 2, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_17.png', correct: 2, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_18.png', correct: 0, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_19.png', correct: 4, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_20.png', correct: 4, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_21.png', correct: 3, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_22.png', correct: 0, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_23.png', correct: 3, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_24.png', correct: 2, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_25.png', correct: 4, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_26.png', correct: 3, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_27.png', correct: 2, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_28.png', correct: 1, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_29.png', correct: 2, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_30.png', correct: 1, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_31.png', correct: 3, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_32.png', correct: 1, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_33.png', correct: 2, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_34.png', correct: 4, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_35.png', correct: 0, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_36.png', correct: 0, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_37.png', correct: 1, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_38.png', correct: 2, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_39.png', correct: 4, explanation: ''},
            { year: 2024, subject: 'intro', image: 'questions/2024_1_1_40.png', correct: 0, explanation: ''},
            
            // 2024ë…„ 1ì°¨ 1êµì‹œ - ë¯¼ë²• (41-80ë²ˆ)
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_41.png', correct: 2, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_42.png', correct: 4, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_43.png', correct: 2, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_44.png', correct: 2, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_45.png', correct: 1, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_46.png', correct: 4, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_47.png', correct: 4, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_48.png', correct: 0, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_49.png', correct: 0, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_50.png', correct: 1, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_51.png', correct: 3, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_52.png', correct: 2, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_53.png', correct: 4, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_54.png', correct: 1, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_55.png', correct: 3, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_56.png', correct: 4, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_57.png', correct: 0, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_58.png', correct: 1, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_59.png', correct: 1, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_60.png', correct: 0, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_61.png', correct: 3, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_62.png', correct: 3, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_63.png', correct: 1, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_64.png', correct: 2, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_65.png', correct: 4, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_66.png', correct: 4, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_67.png', correct: 0, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_68.png', correct: 4, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_69.png', correct: 0, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_70.png', correct: 4, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_71.png', correct: 0, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_72.png', correct: 3, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_73.png', correct: 2, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_74.png', correct: 2, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_75.png', correct: 2, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_76.png', correct: 0, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_77.png', correct: 0, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_78.png', correct: 0, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_79.png', correct: 1, explanation: ''},
            { year: 2024, subject: 'civil', image: 'questions/2024_1_1_80.png', correct: 3, explanation: ''},

            // 2023ë…„ 1ì°¨ 1êµì‹œ - ë¶€ë™ì‚°í•™ê°œë¡  (1-40ë²ˆ)
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_01.png', correct: 0, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_02.png', correct: 2, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_03.png', correct: 3, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_04.png', correct: 1, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_05.png', correct: 2, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_06.png', correct: 3, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_07.png', correct: 4, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_08.png', correct: 3, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_09.png', correct: 1, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_10.png', correct: 0, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_11.png', correct: 1, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_12.png', correct: 2, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_13.png', correct: 1, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_14.png', correct: 2, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_15.png', correct: 0, explanation: '1,2,3,4,5ë²ˆ ëª¨ë‘ ì •ë‹µ'},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_16.png', correct: 1, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_17.png', correct: 3, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_18.png', correct: 2, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_19.png', correct: 2, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_20.png', correct: 4, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_21.png', correct: 3, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_22.png', correct: 0, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_23.png', correct: 1, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_24.png', correct: 0, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_25.png', correct: 2, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_26.png', correct: 0, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_27.png', correct: 0, explanation: '1,2,3,4,5ë²ˆ ëª¨ë‘ ì •ë‹µ'},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_28.png', correct: 0, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_29.png', correct: 3, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_30.png', correct: 4, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_31.png', correct: 1, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_32.png', correct: 4, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_33.png', correct: 4, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_34.png', correct: 3, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_35.png', correct: 3, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_36.png', correct: 4, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_37.png', correct: 4, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_38.png', correct: 0, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_39.png', correct: 1, explanation: ''},
            { year: 2023, subject: 'intro', image: 'questions/2023_1_1_40.png', correct: 0, explanation: ''},
            
            // 2023ë…„ 1ì°¨ 1êµì‹œ - ë¯¼ë²• (41-80ë²ˆ)
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_41.png', correct: 0, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_42.png', correct: 4, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_43.png', correct: 0, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_44.png', correct: 3, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_45.png', correct: 2, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_46.png', correct: 0, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_47.png', correct: 3, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_48.png', correct: 1, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_49.png', correct: 0, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_50.png', correct: 4, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_51.png', correct: 1, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_52.png', correct: 2, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_53.png', correct: 2, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_54.png', correct: 0, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_55.png', correct: 1, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_56.png', correct: 3, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_57.png', correct: 2, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_58.png', correct: 1, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_59.png', correct: 4, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_60.png', correct: 3, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_61.png', correct: 4, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_62.png', correct: 3, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_63.png', correct: 1, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_64.png', correct: 3, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_65.png', correct: 0, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_66.png', correct: 2, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_67.png', correct: 2, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_68.png', correct: 4, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_69.png', correct: 1, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_70.png', correct: 3, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_71.png', correct: 4, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_72.png', correct: 3, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_73.png', correct: 2, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_74.png', correct: 4, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_75.png', correct: 4, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_76.png', correct: 2, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_77.png', correct: 0, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_78.png', correct: 1, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_79.png', correct: 0, explanation: ''},
            { year: 2023, subject: 'civil', image: 'questions/2023_1_1_80.png', correct: 1, explanation: ''},
        ];

        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let questionAnswered = [];
        let startTime;
        let timerInterval;

        function startQuiz() {
            const selectedYear = document.getElementById('yearSelect').value;
            const selectedSubject = document.getElementById('subjectSelect').value;
            const questionCount = parseInt(document.getElementById('questionCount').value) || 40;

            let filteredQuestions = [...questionDatabase];
            
            if (selectedYear !== 'all' && selectedYear !== 'random') {
                filteredQuestions = filteredQuestions.filter(q => q.year == selectedYear);
            }

            if (selectedSubject !== 'all') {
                filteredQuestions = filteredQuestions.filter(q => q.subject === selectedSubject);
            }

            if (selectedYear === 'random') {
                filteredQuestions.sort(() => Math.random() - 0.5);
                filteredQuestions = filteredQuestions.slice(0, questionCount);
            } else {
                filteredQuestions.sort(() => Math.random() - 0.5);
            }

            if (filteredQuestions.length === 0) {
                alert('ì„ íƒí•œ ì¡°ê±´ì— í•´ë‹¹í•˜ëŠ” ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            currentQuestions = filteredQuestions;
            currentQuestionIndex = 0;
            userAnswers = new Array(currentQuestions.length).fill(null);
            questionAnswered = new Array(currentQuestions.length).fill(false);
            startTime = Date.now();

            if (selectedYear === 'random') {
                document.getElementById('headerSubtitle').textContent = `ëœë¤ ëª¨ë“œ (${currentQuestions.length}ë¬¸ì œ)`;
            } else if (selectedYear === 'all') {
                document.getElementById('headerSubtitle').textContent = '2020-2025ë…„ í†µí•©';
            } else {
                document.getElementById('headerSubtitle').textContent = `${selectedYear}ë…„ ê¸°ì¶œ`;
            }

            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('questionScreen').style.display = 'block';
            
            startTimer();
            displayQuestion();
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                const elapsed = Math.floor((Date.now() - startTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                document.getElementById('timer').textContent = 
                    `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            }, 1000);
        }

        function displayQuestion() {
            const question = currentQuestions[currentQuestionIndex];
            const isAnswered = questionAnswered[currentQuestionIndex];
            
            document.getElementById('questionNumber').textContent = 
                `ë¬¸ì œ ${currentQuestionIndex + 1}/${currentQuestions.length}`;
            
            document.getElementById('yearBadge').textContent = `${question.year}ë…„`;
            
            // ì´ë¯¸ì§€ ë¡œë“œ
            const imgContainer = document.getElementById('questionImage').parentElement;
            const imgElement = document.getElementById('questionImage');
            
            // ê¸°ì¡´ ì—ëŸ¬ ë©”ì‹œì§€ ì œê±° (ìˆë‹¤ë©´)
            const existingError = imgContainer.querySelector('.image-error');
            if (existingError) {
                existingError.remove();
            }
            
            // ì´ë¯¸ì§€ í‘œì‹œ ë° ì—ëŸ¬ í•¸ë“¤ëŸ¬ ì´ˆê¸°í™”
            imgElement.style.display = 'block';
            imgElement.src = question.image;
            imgElement.onerror = function() {
                // ì´ë¯¸ì§€ ìˆ¨ê¸°ê³  ì—ëŸ¬ ë©”ì‹œì§€ ì¶”ê°€
                imgElement.style.display = 'none';
                const errorDiv = document.createElement('div');
                errorDiv.className = 'image-error';
                errorDiv.innerHTML = `
                    <h3>âš ï¸ ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</h3>
                    <p>íŒŒì¼: ${question.image}</p>
                    <p style="font-size: 12px; margin-top: 10px;">ì´ë¯¸ì§€ íŒŒì¼ì„ questions/ í´ë”ì— ì¶”ê°€í•´ì£¼ì„¸ìš”.</p>
                `;
                imgContainer.appendChild(errorDiv);
            };
            
            // ë²„íŠ¼ ìƒíƒœ ì´ˆê¸°í™”
            const buttons = document.querySelectorAll('.number-btn');
            buttons.forEach((btn, index) => {
                btn.className = 'number-btn';
                
                if (isAnswered) {
                    btn.classList.add('disabled');
                    if (index === question.correct) {
                        btn.classList.add('correct');
                    } else if (index === userAnswers[currentQuestionIndex]) {
                        btn.classList.add('wrong');
                    }
                } else if (userAnswers[currentQuestionIndex] === index) {
                    btn.classList.add('selected');
                }
            });

            // í•´ì„¤ í‘œì‹œ
            const explanationBox = document.getElementById('explanationBox');
            const explanationText = document.getElementById('explanationText');
            
            if (isAnswered) {
                explanationText.textContent = question.explanation;
                explanationBox.classList.add('show');
            } else {
                explanationBox.classList.remove('show');
            }

            // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
            const progress = ((currentQuestionIndex + 1) / currentQuestions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';

            // ë²„íŠ¼ ìƒíƒœ
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            document.getElementById('nextBtn').textContent = 
                currentQuestionIndex === currentQuestions.length - 1 ? 'ê²°ê³¼ ë³´ê¸° âœ“' : 'ë‹¤ìŒ â–¶';
        }

        function selectAnswer(answerIndex) {
            if (questionAnswered[currentQuestionIndex]) {
                return;
            }

            const question = currentQuestions[currentQuestionIndex];
            userAnswers[currentQuestionIndex] = answerIndex;
            questionAnswered[currentQuestionIndex] = true;

            // ì¦‰ì‹œ ì •ë‹µ/ì˜¤ë‹µ í‘œì‹œ
            const buttons = document.querySelectorAll('.number-btn');
            buttons.forEach((btn, index) => {
                btn.classList.add('disabled');
                if (index === question.correct) {
                    btn.classList.add('correct');
                } else if (index === answerIndex) {
                    btn.classList.add('wrong');
                }
            });

            // í•´ì„¤ í‘œì‹œ
            const explanationBox = document.getElementById('explanationBox');
            const explanationText = document.getElementById('explanationText');
            explanationText.textContent = question.explanation;
            explanationBox.classList.add('show');
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (currentQuestionIndex < currentQuestions.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                showResults();
            }
        }

        function goHome() {
            if (confirm('ì •ë§ í™ˆìœ¼ë¡œ ëŒì•„ê°€ì‹œê² ìŠµë‹ˆê¹Œ?\ní˜„ì¬ê¹Œì§€ì˜ ì§„í–‰ ìƒí™©ì€ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.')) {
                clearInterval(timerInterval);
                resetQuiz();
            }
        }

        function finishEarly() {
            if (confirm('ì‹œí—˜ì„ ì¢…ë£Œí•˜ê³  ê²°ê³¼ë¥¼ í™•ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\në‹µí•˜ì§€ ì•Šì€ ë¬¸ì œëŠ” ì˜¤ë‹µìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.')) {
                for (let i = 0; i < currentQuestions.length; i++) {
                    if (userAnswers[i] === null) {
                        userAnswers[i] = -1;
                    }
                }
                showResults();
            }
        }

        function showResults() {
            clearInterval(timerInterval);

            let correctCount = 0;
            let wrongQuestions = [];

            userAnswers.forEach((answer, index) => {
                if (answer === currentQuestions[index].correct) {
                    correctCount++;
                } else {
                    wrongQuestions.push({
                        questionNum: index + 1,
                        question: currentQuestions[index],
                        userAnswer: answer
                    });
                }
            });

            const score = Math.round((correctCount / currentQuestions.length) * 100);

            document.getElementById('questionScreen').style.display = 'none';
            document.getElementById('resultScreen').style.display = 'block';

            document.getElementById('finalScore').textContent = score + 'ì ';
            document.getElementById('totalQuestions').textContent = currentQuestions.length;
            document.getElementById('correctAnswers').textContent = correctCount;
            document.getElementById('wrongAnswers').textContent = wrongQuestions.length;

            const wrongAnswersList = document.getElementById('wrongAnswersList');
            wrongAnswersList.innerHTML = '';

            if (wrongQuestions.length === 0) {
                wrongAnswersList.innerHTML = '<p style="text-align: center; color: #4caf50; font-size: 18px; padding: 40px;">ğŸ‰ ëª¨ë“  ë¬¸ì œë¥¼ ë§í˜”ìŠµë‹ˆë‹¤! ì™„ë²½í•©ë‹ˆë‹¤!</p>';
            } else {
                wrongQuestions.forEach(wrong => {
                    const wrongDiv = document.createElement('div');
                    wrongDiv.className = 'wrong-answer-item';
                    
                    const userAnswerText = wrong.userAnswer !== null && wrong.userAnswer !== -1
                        ? `${wrong.userAnswer + 1}ë²ˆ` 
                        : '(ë‹µì•ˆ ë¯¸ì„ íƒ)';
                    
                    wrongDiv.innerHTML = `
                        <div class="wrong-answer-header">
                            [${wrong.question.year}ë…„] ë¬¸ì œ ${wrong.questionNum}
                        </div>
                        <div style="margin-top: 10px;">
                            <div style="color: #f44336; margin-bottom: 5px;">
                                âŒ ì„ íƒí•œ ë‹µ: ${userAnswerText}
                            </div>
                            <div style="color: #4caf50; margin-bottom: 5px;">
                                âœ… ì •ë‹µ: ${wrong.question.correct + 1}ë²ˆ
                            </div>
                        </div>
                        <div class="wrong-answer-explanation">
                            <div class="explanation-label">ğŸ’¡ í•´ì„¤:</div>
                            ${wrong.question.explanation}
                        </div>
                    `;
                    wrongAnswersList.appendChild(wrongDiv);
                });
            }
        }

        function resetQuiz() {
            currentQuestionIndex = 0;
            userAnswers = [];
            questionAnswered = [];
            document.getElementById('questionScreen').style.display = 'none';
            document.getElementById('resultScreen').style.display = 'none';
            document.getElementById('startScreen').style.display = 'block';
            document.getElementById('progressFill').style.width = '0%';
            document.getElementById('headerSubtitle').textContent = '2020-2025ë…„ ê¸°ì¶œë¬¸ì œ';
        }

        function restartQuiz() {
            resetQuiz();
        }
    </script>
</body>
</html>